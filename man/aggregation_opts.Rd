% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregation_opts.R
\name{aggregation_opts}
\alias{aggregation_opts}
\title{Custom Aggregation Options}
\usage{
aggregation_opts(
  ref_time = identity,
  delay = function(x) rowSums(x, na.rm = TRUE)
)
}
\arguments{
\item{ref_time}{Function to apply to aggregate reference times.
Must accept and return a matrix. Default is \code{identity}.}

\item{delay}{Function to apply to aggregate across delays.
Must accept a matrix and return a numeric vector. Default is
\code{function(x) rowSums(x, na.rm = TRUE)}.}
}
\value{
An object of class \code{c("aggregation_custom", "aggregation_opts")}
containing the reference time and delay aggregation functions.
}
\description{
Creates an aggregation options object that defines how to preprocess
data before uncertainty estimation. This allows custom transformations
of the reference time dimension and delay dimension.
}
\examples{
# Create custom aggregation with rolling sums
agg <- aggregation_opts(
  ref_time = function(x) {
    # 3-day rolling sum (requires zoo package)
    if (requireNamespace("zoo", quietly = TRUE)) {
      zoo::rollsum(x, k = 3, align = "right", fill = NA)
    } else {
      x
    }
  },
  delay = function(x) rowSums(x, na.rm = TRUE)
)
print(agg)
}
\seealso{
\code{\link[=aggregation_observed]{aggregation_observed()}}

Other aggregation_opts: 
\code{\link{aggregation_observed}()},
\code{\link{assert_aggregation_opts}()},
\code{\link{assert_aggregation_opts.aggregation_opts}()},
\code{\link{assert_aggregation_opts.default}()},
\code{\link{print.aggregation_opts}()}
}
\concept{aggregation_opts}
