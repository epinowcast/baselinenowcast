# Generate retrospective reporting triangles

This function ingests a list of truncated reporting triangles and
iteratively generates the reporting triangle that would have been
available as of the maximum reference time. It operates on each element
in the list in order (from most recent retrospective nowcast time to
oldest retrospective nowcast time).

## Usage

``` r
construct_triangles(truncated_reporting_triangles, structure = 1)
```

## Arguments

- truncated_reporting_triangles:

  List of `n` truncated reporting triangle matrices with as many rows as
  available given the truncation.

- structure:

  Integer or vector specifying the reporting structure. If integer,
  divides columns evenly by that integer (with last possibly truncated).
  If vector, the sum must not be greater than or equal to the number of
  columns. Default is 1 (standard triangular structure).

## Value

`reporting_triangles` List of retrospective reporting triangles,
generated by removing the bottom right observations from the truncated
reporting triangle matrices.

## Examples

``` r
triangle <- matrix(
  c(
    65, 46, 21, 7,
    70, 40, 20, 5,
    80, 50, 10, 10,
    100, 40, 31, 20,
    95, 45, 21, NA,
    82, 42, NA, NA,
    70, NA, NA, NA
  ),
  nrow = 7,
  byrow = TRUE
)

trunc_rts <- truncate_triangles(triangle, n = 2)
retro_rts <- construct_triangles(trunc_rts)

# With custom structure
retro_rts_custom <- construct_triangles(
  trunc_rts,
  structure = 2
)
retro_rts_custom
#> [[1]]
#>      [,1] [,2] [,3] [,4]
#> [1,]   65   46   21    7
#> [2,]   70   40   20    5
#> [3,]   80   50   10   10
#> [4,]  100   40   31   20
#> [5,]   95   45   21   NA
#> [6,]   82   42   NA   NA
#> 
#> [[2]]
#>      [,1] [,2] [,3] [,4]
#> [1,]   65   46   21    7
#> [2,]   70   40   20    5
#> [3,]   80   50   10   10
#> [4,]  100   40   31   NA
#> [5,]   95   45   NA   NA
#> 
```
